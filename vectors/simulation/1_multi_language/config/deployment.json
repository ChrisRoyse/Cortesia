{
  "deployment": {
    "name": "ecommerce-platform",
    "version": "1.0.0",
    "description": "Comprehensive e-commerce platform deployment configuration",
    "maintainer": "DevOps Team <devops@ecommerce.com>",
    "created": "2024-01-01T00:00:00Z",
    "last_updated": "2024-01-15T12:30:00Z"
  },
  "environments": {
    "development": {
      "domain": "dev.ecommerce.local",
      "replicas": 1,
      "resources": {
        "cpu": "500m",
        "memory": "1Gi",
        "storage": "10Gi"
      },
      "database": {
        "host": "localhost",
        "port": 5432,
        "name": "ecommerce_dev",
        "ssl": false,
        "backup_enabled": false
      },
      "redis": {
        "host": "localhost",
        "port": 6379,
        "database": 0,
        "password": null
      },
      "features": {
        "debug": true,
        "auto_migrate": true,
        "seed_data": true,
        "email_sending": false,
        "payment_processing": false
      }
    },
    "staging": {
      "domain": "staging.ecommerce.com",
      "replicas": 2,
      "resources": {
        "cpu": "1",
        "memory": "2Gi",
        "storage": "50Gi"
      },
      "database": {
        "host": "staging-db.internal",
        "port": 5432,
        "name": "ecommerce_staging",
        "ssl": true,
        "backup_enabled": true,
        "backup_schedule": "0 2 * * *"
      },
      "redis": {
        "host": "staging-redis.internal",
        "port": 6379,
        "database": 0,
        "password": "${REDIS_PASSWORD}",
        "cluster_enabled": false
      },
      "features": {
        "debug": false,
        "auto_migrate": false,
        "seed_data": false,
        "email_sending": true,
        "payment_processing": true,
        "payment_mode": "sandbox"
      },
      "monitoring": {
        "health_checks": true,
        "metrics": true,
        "logging": "info",
        "tracing": true
      }
    },
    "production": {
      "domain": "ecommerce.com",
      "replicas": 5,
      "resources": {
        "cpu": "2",
        "memory": "4Gi",
        "storage": "100Gi"
      },
      "database": {
        "host": "prod-db-cluster.internal",
        "port": 5432,
        "name": "ecommerce_production",
        "ssl": true,
        "ssl_mode": "require",
        "backup_enabled": true,
        "backup_schedule": "0 1 * * *",
        "point_in_time_recovery": true,
        "read_replicas": [
          {
            "host": "prod-db-read-1.internal",
            "weight": 50
          },
          {
            "host": "prod-db-read-2.internal", 
            "weight": 30
          },
          {
            "host": "prod-db-read-3.internal",
            "weight": 20
          }
        ]
      },
      "redis": {
        "host": "prod-redis-cluster.internal",
        "port": 6379,
        "database": 0,
        "password": "${REDIS_PASSWORD}",
        "cluster_enabled": true,
        "sentinel_enabled": true,
        "master_name": "ecommerce-master"
      },
      "features": {
        "debug": false,
        "auto_migrate": false,
        "seed_data": false,
        "email_sending": true,
        "payment_processing": true,
        "payment_mode": "live"
      },
      "monitoring": {
        "health_checks": true,
        "metrics": true,
        "logging": "warn",
        "tracing": true,
        "alerting": true
      },
      "security": {
        "rate_limiting": true,
        "ddos_protection": true,
        "waf_enabled": true,
        "ssl_enforcement": true,
        "hsts_enabled": true,
        "csrf_protection": true
      }
    }
  },
  "services": {
    "backend": {
      "image": "ecommerce/backend",
      "tag": "${VERSION}",
      "port": 8000,
      "health_check": {
        "path": "/health",
        "interval": 30,
        "timeout": 5,
        "retries": 3
      },
      "environment_variables": {
        "DATABASE_URL": "${DATABASE_URL}",
        "REDIS_URL": "${REDIS_URL}",
        "JWT_SECRET": "${JWT_SECRET}",
        "STRIPE_SECRET_KEY": "${STRIPE_SECRET_KEY}",
        "AWS_ACCESS_KEY_ID": "${AWS_ACCESS_KEY_ID}",
        "AWS_SECRET_ACCESS_KEY": "${AWS_SECRET_ACCESS_KEY}",
        "EMAIL_SMTP_PASSWORD": "${EMAIL_SMTP_PASSWORD}"
      },
      "volumes": [
        {
          "name": "uploads",
          "mount_path": "/app/uploads",
          "size": "50Gi",
          "storage_class": "fast-ssd"
        },
        {
          "name": "logs",
          "mount_path": "/app/logs",
          "size": "10Gi",
          "storage_class": "standard"
        }
      ],
      "autoscaling": {
        "enabled": true,
        "min_replicas": 2,
        "max_replicas": 20,
        "target_cpu_utilization": 70,
        "target_memory_utilization": 80,
        "scale_up_stabilization": 60,
        "scale_down_stabilization": 300
      }
    },
    "frontend": {
      "image": "ecommerce/frontend",
      "tag": "${VERSION}",
      "port": 3000,
      "health_check": {
        "path": "/",
        "interval": 30,
        "timeout": 5,
        "retries": 3
      },
      "environment_variables": {
        "REACT_APP_API_URL": "${API_URL}",
        "REACT_APP_STRIPE_PUBLIC_KEY": "${STRIPE_PUBLIC_KEY}",
        "REACT_APP_GOOGLE_ANALYTICS_ID": "${GOOGLE_ANALYTICS_ID}"
      },
      "static_assets": {
        "cdn_enabled": true,
        "cdn_domain": "cdn.ecommerce.com",
        "cache_duration": 31536000,
        "compression": true
      }
    },
    "recommendation_engine": {
      "image": "ecommerce/recommendation-engine",
      "tag": "${VERSION}",
      "port": 8001,
      "health_check": {
        "path": "/health",
        "interval": 30,
        "timeout": 5,
        "retries": 3
      },
      "environment_variables": {
        "DATABASE_URL": "${DATABASE_URL}",
        "RUST_LOG": "info"
      },
      "resources": {
        "cpu": "1",
        "memory": "2Gi"
      }
    },
    "nginx": {
      "image": "nginx:1.25-alpine",
      "port": 80,
      "config_map": "nginx-config",
      "ssl": {
        "enabled": true,
        "cert_source": "letsencrypt",
        "redirect_http": true
      },
      "load_balancing": {
        "algorithm": "round_robin",
        "sticky_sessions": false,
        "health_checks": true
      }
    },
    "redis": {
      "image": "redis:7-alpine",
      "port": 6379,
      "persistence": {
        "enabled": true,
        "storage_class": "fast-ssd",
        "size": "20Gi"
      },
      "configuration": {
        "maxmemory": "1gb",
        "maxmemory_policy": "allkeys-lru",
        "save_enabled": true,
        "appendonly": true
      }
    },
    "elasticsearch": {
      "image": "elasticsearch:8.11.0",
      "port": 9200,
      "cluster": {
        "name": "ecommerce-search",
        "nodes": 3,
        "master_nodes": 1,
        "data_nodes": 2
      },
      "resources": {
        "cpu": "2",
        "memory": "4Gi",
        "storage": "100Gi"
      },
      "configuration": {
        "heap_size": "2g",
        "index_refresh_interval": "1s",
        "number_of_shards": 3,
        "number_of_replicas": 1
      }
    }
  },
  "networking": {
    "ingress": {
      "enabled": true,
      "class": "nginx",
      "annotations": {
        "cert-manager.io/cluster-issuer": "letsencrypt-prod",
        "nginx.ingress.kubernetes.io/rate-limit": "100",
        "nginx.ingress.kubernetes.io/rate-limit-window": "1m"
      },
      "rules": [
        {
          "host": "${DOMAIN}",
          "paths": [
            {
              "path": "/",
              "service": "frontend",
              "port": 3000
            },
            {
              "path": "/api",
              "service": "backend",
              "port": 8000
            },
            {
              "path": "/recommendations",
              "service": "recommendation-engine",
              "port": 8001
            }
          ]
        }
      ]
    },
    "service_mesh": {
      "enabled": false,
      "provider": "istio",
      "mtls": true,
      "traffic_policies": {
        "timeout": "30s",
        "retry": {
          "attempts": 3,
          "per_try_timeout": "10s"
        },
        "circuit_breaker": {
          "consecutive_errors": 5,
          "interval": "30s",
          "base_ejection_time": "30s"
        }
      }
    }
  },
  "monitoring": {
    "prometheus": {
      "enabled": true,
      "retention": "15d",
      "scrape_interval": "15s",
      "storage": "50Gi"
    },
    "grafana": {
      "enabled": true,
      "admin_password": "${GRAFANA_ADMIN_PASSWORD}",
      "dashboards": [
        "kubernetes-cluster",
        "application-metrics",
        "database-performance",
        "business-metrics"
      ]
    },
    "jaeger": {
      "enabled": true,
      "sampling_rate": 0.1,
      "storage": "elasticsearch"
    },
    "log_aggregation": {
      "enabled": true,
      "provider": "fluentd",
      "output": "elasticsearch",
      "retention": "30d"
    }
  },
  "security": {
    "network_policies": {
      "enabled": true,
      "default_deny": true,
      "allowed_connections": [
        {
          "from": "frontend",
          "to": "backend",
          "ports": [8000]
        },
        {
          "from": "backend", 
          "to": "database",
          "ports": [5432]
        },
        {
          "from": "backend",
          "to": "redis",
          "ports": [6379]
        },
        {
          "from": "recommendation-engine",
          "to": "database",
          "ports": [5432]
        }
      ]
    },
    "pod_security": {
      "enabled": true,
      "standard": "restricted",
      "run_as_non_root": true,
      "read_only_root_filesystem": true,
      "allow_privilege_escalation": false
    },
    "secrets_management": {
      "provider": "kubernetes-secrets",
      "encryption_at_rest": true,
      "external_secrets": {
        "enabled": false,
        "provider": "aws-secrets-manager"
      }
    }
  },
  "deployment_strategy": {
    "type": "rolling_update",
    "rolling_update": {
      "max_unavailable": "25%",
      "max_surge": "25%"
    },
    "canary": {
      "enabled": false,
      "steps": [
        {"weight": 10, "duration": "5m"},
        {"weight": 25, "duration": "10m"},
        {"weight": 50, "duration": "15m"},
        {"weight": 100}
      ]
    },
    "blue_green": {
      "enabled": false,
      "auto_promotion": false,
      "scale_down_delay": "30s"
    }
  },
  "backup": {
    "database": {
      "enabled": true,
      "schedule": "0 2 * * *",
      "retention": "30d",
      "storage": {
        "type": "s3",
        "bucket": "ecommerce-db-backups",
        "encryption": true
      }
    },
    "persistent_volumes": {
      "enabled": true,
      "schedule": "0 3 * * 0",
      "retention": "4w"
    },
    "application_data": {
      "enabled": true,
      "includes": [
        "/app/uploads",
        "/app/config"
      ],
      "schedule": "0 4 * * *",
      "retention": "7d"
    }
  },
  "disaster_recovery": {
    "cross_region_replication": {
      "enabled": false,
      "target_region": "us-east-1",
      "sync_frequency": "1h"
    },
    "automated_failover": {
      "enabled": false,
      "health_check_failures": 5,
      "health_check_interval": "30s"
    },
    "backup_restoration": {
      "automated": false,
      "rto": "4h",
      "rpo": "1h"
    }
  },
  "cost_optimization": {
    "vertical_pod_autoscaler": {
      "enabled": true,
      "update_mode": "Auto"
    },
    "cluster_autoscaler": {
      "enabled": true,
      "scale_down_delay": "10m",
      "scale_down_unneeded_time": "10m"
    },
    "spot_instances": {
      "enabled": false,
      "percentage": 50,
      "node_pools": ["workers"]
    },
    "resource_quotas": {
      "cpu": "100",
      "memory": "200Gi",
      "storage": "1Ti",
      "pods": "500"
    }
  },
  "compliance": {
    "data_protection": {
      "gdpr_compliance": true,
      "ccpa_compliance": true,
      "data_encryption": true,
      "right_to_deletion": true
    },
    "security_standards": {
      "pci_dss": true,
      "soc2": true,
      "iso27001": false
    },
    "audit_logging": {
      "enabled": true,
      "retention": "7y",
      "immutable": true
    }
  }
}