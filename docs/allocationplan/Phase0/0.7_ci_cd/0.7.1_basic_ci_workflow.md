# Micro-Phase 0.7.1: Basic CI Workflow Setup

## Objective
Create fundamental GitHub Actions CI workflow with multi-platform testing, code quality checks, and basic security validation.

## Prerequisites
- All core components implemented (0.1-0.6 complete)
- Project workspace structure established
- Test suites from all crates

## Input
- Cargo workspace configuration
- Test suites from all crates
- Project structure requirements

## Task Details

### Step 1: Create Basic CI Workflow
Setup automated testing on push and pull requests with multi-platform support.

### Step 2: Add Code Quality Checks
Implement cargo clippy, formatting checks, and documentation tests.

### Step 3: Add Coverage Reporting
Setup code coverage collection and reporting to Codecov.

### Step 4: Add MSRV Validation
Verify minimum supported Rust version compatibility.

## Expected Output
- `.github/workflows/ci.yml` implemented
- Multi-platform test matrix (Linux, Windows, macOS)
- Code quality and coverage integration
- MSRV validation

## Verification Steps
1. Push to GitHub and verify CI runs
2. Check that all tests pass across platforms
3. Verify coverage reports are generated
4. Confirm MSRV builds work

## Time Estimate
25-30 minutes

## AI Execution Prompt
```
Setup basic GitHub Actions CI workflow with multi-platform testing.

1. Create .github/workflows directory:
   mkdir -p .github/workflows

2. Create .github/workflows/ci.yml:

```yaml
name: Continuous Integration

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

env:
  CARGO_TERM_COLOR: always
  RUST_BACKTRACE: 1

jobs:
  test:
    name: Test Suite
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        rust: [stable, beta]
        exclude:
          # Reduce CI load - only test beta on ubuntu
          - os: windows-latest
            rust: beta
          - os: macos-latest
            rust: beta

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Rust toolchain
      uses: dtolnay/rust-toolchain@master
      with:
        toolchain: ${{ matrix.rust }}
        components: rustfmt, clippy

    - name: Configure Rust cache
      uses: Swatinem/rust-cache@v2
      with:
        key: ${{ matrix.os }}-${{ matrix.rust }}

    - name: Check formatting
      run: cargo fmt --all -- --check

    - name: Run Clippy
      run: cargo clippy --all-targets --all-features -- -D warnings

    - name: Build all crates
      run: cargo build --workspace --all-features

    - name: Run tests
      run: cargo test --workspace --all-features

    - name: Run doc tests
      run: cargo test --doc --workspace

  coverage:
    name: Code Coverage
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Rust toolchain
      uses: dtolnay/rust-toolchain@stable
      with:
        components: llvm-tools-preview

    - name: Install cargo-llvm-cov
      run: cargo install cargo-llvm-cov

    - name: Configure Rust cache
      uses: Swatinem/rust-cache@v2

    - name: Generate coverage report
      run: cargo llvm-cov --workspace --all-features --lcov --output-path lcov.info

    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v3
      with:
        files: lcov.info
        fail_ci_if_error: true

  build-release:
    name: Build Release
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Rust toolchain
      uses: dtolnay/rust-toolchain@stable

    - name: Configure Rust cache
      uses: Swatinem/rust-cache@v2

    - name: Build release
      run: cargo build --release --workspace

    - name: Run release tests
      run: cargo test --release --workspace

  minimum-rust-version:
    name: Minimum Rust Version
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install minimum Rust version
      uses: dtolnay/rust-toolchain@master
      with:
        toolchain: "1.70.0"  # MSRV for the project

    - name: Configure Rust cache
      uses: Swatinem/rust-cache@v2

    - name: Build with MSRV
      run: cargo build --workspace

    - name: Test with MSRV
      run: cargo test --workspace
```

Basic CI workflow is now configured with comprehensive testing and quality checks.
```

## Success Criteria
- [ ] Multi-platform CI workflow operational
- [ ] Code quality checks enforced
- [ ] Coverage reporting integrated
- [ ] MSRV validation working